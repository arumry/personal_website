---
// Experience data structure
const experiences = [
  {
    id: 0,
    company: "Kraken Digital Asset Exchange",
    location: "Remote",
    title: "Senior Software Engineer",
    period: "2021 - 2024",
    description: [
      "Reduced downtime by 2% and increased data throughput by 11% by engineering fault-tolerant data pipelines through Rust, Golang, and TypeScript.",
      "Cut message processing latency by optimizing Kafka-based data ingestion and processing to ensure 99.9% data delivery reliability.",
      "Decreased operational costs by 5% and improved scalability by architecting AWS infrastructure that supported data-intensive applications with 99.99% uptime.",
      "Developed analytics frameworks to enhance actionable insights extraction efficiency, drive data-driven decision-making, and improve product performance.",
      "Reduced bugs and improved code maintainability in Node.js projects by leading TypeScript adoption to accelerate feature delivery.",
      "Delivered resource savings by developing and implementing automation strategies to reduce manual intervention and improve workflow efficiency.",
      "Improved code coverage metrics by 17% and increased team productivity by fostering a culture of continuous improvement among junior engineers.",
      "Increased employee satisfaction by cultivating an inclusive environment and advocating for team cohesion and innovation."
    ],
    technologies: ["Rust", "Python", "TypeScript"]
  },
  {
    id: 1,
    company: "Cars.com",
    location: "Remote",
    title: "Senior Software Engineer",
    period: "2019 – 2021",
    additionalRole: {
      title: "Software Engineer",
      period: "2017 – 2019"
    },
    description: [
      "Promoted to Senior Software Engineer by delivering exceptional results and demonstrating leadership potential.",
      "Accelerated inventory placement tenfold with Elixir and Erlang/OTP, leveraging GenStage, Flow, and streaming technologies.",
      "Increased user engagement metrics by implementing the Elixir Phoenix Framework, enhancing search speed by 30% with Elasticsearch and Redis, and integrating third-party APIs for seamless data flow.",
      "Reduced post-launch issue resolution time as a co-author for specifications, design documents, and documentation."
    ],
    technologies: ["Elixir", "Erlang/OTP", "GenStage", "Flow", "Elixir Phoenix Framework", "Elasticsearch"]
  },
  {
    id: 2,
    company: "MVPindex",
    location: "Dallas, TX",
    title: "Software Engineer",
    period: "2017",
    description: [
      "Reduced processing times 15% using Node.js, Kafka, SQL, Elasticsearch, and AWS.",
      "Improved audience segmentation by collaborating with data scientists on Facebook data to develop advanced demographic models.",
      "Increased user acquisition and retention by integrating OAuth for multiple social media logins."
    ],
    technologies: ["Node.js", "Kafka", "SQL", "Elasticsearch", "AWS"]
  },
  {
    id: 3,
    company: "ZEFR",
    location: "PROVO, UT",
    title: "Software Engineer",
    period: "2015 - 2017",
    description: [
      "Boosted collaboration among internal marketing teams and external partners by developing and deploying an Influencer Management System (IMS).",
      "Enhanced campaign insights by designing and implementing data extraction and analysis procedures to monitor daily social media posts from top influencers.",
      "Increased campaign engagement by 35% and reduced acquisition costs by optimizing targeting algorithms."
    ],
    technologies: []
  },
  {
    id: 4,
    company: "Previous Roles",
    location: "",
    title: "Various Positions",
    period: "2012 - 2015",
    description: [],
    additionalRoles: [
      {
        title: "Web Developer",
        company: "About Time Technologies, LLC",
        period: "2014 - 2015"
      },
      {
        title: "Technical Supervisor",
        company: "Bluehost",
        period: "2012 - 2014"
      }
    ],
    technologies: []
  }
];

const education = [
  {
    id: 5,
    institution: "UC San Diego",
    location: "Online",
    title: "Extended Studies Machine Learning Engineering Bootcamp",
    period: "2025",
    coursework: "Deep Learning, Computer Vision and Image Processing, The Machine Learning Engineering Stack, ML Models at Scale and In Production, Deploying ML Systems"
  },
  {
    id: 6,
    institution: "DevMountain",
    location: "Provo, UT",
    title: "Certificate Of Completion, Full Stack Software Engineer",
    period: "2015",
    coursework: "HTML 5 & CSS3, JavaScript, Git & GitHub, jQuery, AngularJS, Test-Driven Development, Node.JS, Databases"
  },
  {
    id: 7,
    institution: "Utah Valley University",
    location: "Orem, UT",
    title: "Coursework toward a Bachelor of Science (B.Sc.) In Computer Science",
    period: "2011 - 2012",
    coursework: ""
  }
];
---

<section
  id="experience-section"
  class="relative w-full bg-primary flex flex-col items-center justify-center mb-20 pb-14"
>
  <div
    id="experience-content"
    class="w-full grid max-w-[1280px] gap-8 py-10 px-5 mx-auto rounded-lg md:px-12 lg:px-16 xl:px-32 bg-transparent text-gray-100 transition-all duration-1000 opacity-0 translate-y-52"
  >
    <h2 class="text-zinc-500 w-full">&#47;&#47; Experience</h2>

    <!-- Mobile Card Layout (< 640px) -->
    <div class="sm:hidden w-full mt-10 space-y-6">
      <!-- Experience Cards -->
      <div class="space-y-4">
        <h3 class="text-tertiary text-base font-medium px-2 before:content-['▹'] before:text-tertiary before:mr-3">
          Experience
        </h3>
        {experiences.map((exp, index) => (
          <div
            class="mobile-card bg-gradient-to-r from-primary-light/30 to-primary-light/10 backdrop-blur-sm border border-secondary/20 rounded-2xl overflow-hidden transition-all duration-300 shadow-lg"
            data-card={exp.id}
          >
            <button
              class="mobile-card-header w-full text-left px-5 py-4 flex items-center justify-between hover:bg-secondary/8 active:bg-secondary/12 transition-colors duration-200 min-h-[64px] focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:ring-inset"
              aria-expanded={index === 0 ? "true" : "false"}
              aria-controls={`mobile-card-content-${exp.id}`}
            >
              <div class="flex-1 min-w-0 pr-4">
                <h4 class="text-white font-semibold text-base leading-tight mb-1">
                  {exp.title}
                </h4>
                <p class="text-sixth text-sm opacity-90">
                  @ {exp.company} {exp.location && `(${exp.location})`}
                </p>
              </div>
              <div class="flex-shrink-0 flex items-center justify-center w-10 h-10">
                <svg
                  class={`mobile-card-chevron w-6 h-6 text-secondary transition-transform duration-300 ease-out ${index === 0 ? 'rotate-180' : 'rotate-0'}`}
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  stroke-width="2.5"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                </svg>
              </div>
            </button>
            <div
              class={`mobile-card-content overflow-hidden transition-all duration-300 ease-out ${index === 0 ? 'max-h-screen opacity-100' : 'max-h-0 opacity-0'}`}
              id={`mobile-card-content-${exp.id}`}
              aria-hidden={index === 0 ? "false" : "true"}
            >
              <div class="px-5 pb-5 border-t border-secondary/10">
                <div class="pt-5">
                  <p class="text-sm text-zinc-400 mb-5 font-medium">{exp.period}</p>
                  {exp.additionalRole && (
                    <div class="mb-5">
                      <h5 class="text-white font-semibold text-sm mb-2">{exp.additionalRole.title}</h5>
                      <p class="text-sm text-zinc-400 font-medium">{exp.additionalRole.period}</p>
                    </div>
                  )}
                  {exp.additionalRoles && (
                    <div class="space-y-4 mb-5">
                      {exp.additionalRoles.map((role) => (
                        <div class="bg-primary-light/20 rounded-lg p-3">
                          <h5 class="text-white font-semibold text-sm mb-1">
                            {role.title}
                            <span class="text-sixth font-normal"> @ {role.company}</span>
                          </h5>
                          <p class="text-sm text-zinc-400">{role.period}</p>
                        </div>
                      ))}
                    </div>
                  )}
                  {exp.description.length > 0 && (
                    <ul class="space-y-4 text-sm text-zinc-300 mb-5 leading-relaxed">
                      {exp.description.map((item) => (
                        <li class="relative pl-5 before:absolute before:left-0 before:top-2 before:w-2 before:h-2 before:bg-secondary before:rounded-full">
                          {item}
                        </li>
                      ))}
                    </ul>
                  )}
                  {exp.technologies.length > 0 && (
                    <div class="flex flex-wrap gap-2">
                      {exp.technologies.map((tech) => (
                        <span class="text-xs bg-secondary/30 text-secondary rounded-lg px-3 py-1.5 font-medium">
                          {tech}
                        </span>
                      ))}
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- Education Cards -->
      <div class="space-y-4">
        <h3 class="text-tertiary text-base font-medium px-2 before:content-['▹'] before:text-tertiary before:mr-3">
          Education
        </h3>
        {education.map((edu) => (
          <div
            class="mobile-card bg-gradient-to-r from-primary-light/30 to-primary-light/10 backdrop-blur-sm border border-secondary/20 rounded-2xl overflow-hidden transition-all duration-300 shadow-lg"
            data-card={edu.id}
          >
            <button
              class="mobile-card-header w-full text-left px-5 py-4 flex items-center justify-between hover:bg-secondary/8 active:bg-secondary/12 transition-colors duration-200 min-h-[64px] focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:ring-inset"
              aria-expanded="false"
              aria-controls={`mobile-card-content-${edu.id}`}
            >
              <div class="flex-1 min-w-0 pr-4">
                <h4 class="text-white font-semibold text-base leading-tight mb-1">
                  {edu.title}
                </h4>
                <p class="text-sixth text-sm opacity-90">
                  @ {edu.institution} {edu.location && `(${edu.location})`}
                </p>
              </div>
              <div class="flex-shrink-0 flex items-center justify-center w-10 h-10">
                <svg
                  class="mobile-card-chevron w-6 h-6 text-secondary transition-transform duration-300 ease-out rotate-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  stroke-width="2.5"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                </svg>
              </div>
            </button>
            <div
              class="mobile-card-content overflow-hidden transition-all duration-300 ease-out max-h-0 opacity-0"
              id={`mobile-card-content-${edu.id}`}
              aria-hidden="true"
            >
              <div class="px-5 pb-5 border-t border-secondary/10">
                <div class="pt-5">
                  <p class="text-sm text-zinc-400 mb-5 font-medium">{edu.period}</p>
                  {edu.coursework && (
                    <div class="bg-primary-light/20 rounded-lg p-4">
                      <p class="text-sm text-zinc-300 leading-relaxed">
                        <span class="text-secondary font-semibold">Relevant Coursework:</span> {edu.coursework}
                      </p>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Desktop Tab Layout (≥ 640px) -->
    <div
      class="hidden sm:flex w-full flex-col sm:flex-row justify-start gap-5 items-start mt-10 overflow-hidden"
    >
      <div class="w-full h-fit max-w-full sm:max-w-[220px] overflow-x-auto">
        <div class="relative w-fit max-w-fit sm:min-w-[220px] sm:max-w-[220px] sm:w-[220px] flex flex-row overflow-x-scroll hidden-scrollbar sm:overflow-hidden overflow-y-hidden sm:flex-col items-start text-white/80">
          <!-- Modern pill indicator -->
          <div
            id="tab-pill"
            class="hidden sm:block absolute left-0 right-0 h-11 rounded-xl bg-gradient-to-r from-secondary/20 to-tertiary/20 backdrop-blur-sm border border-secondary/30 shadow-lg"
            style="transform: translateY(var(--pill-top, 0px)); transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);"
          ></div>
          <h2 class="relative text-tertiary px-5 py-2 before:absolute before:top-0 before:left-0.5 before:content-['▹'] before:text-tertiary before:mt-2">
            Experience
          </h2>
          <button
            class="tab-button py-2.5 w-fit sm:w-full text-left px-4 sm:px-4 rounded-xl transition-all duration-300 whitespace-nowrap overflow-hidden overflow-ellipsis max-w-fit sm:max-w-full text-white font-medium relative z-10 cursor-pointer"
            data-tab="0"
            role="tab"
            aria-selected="true"
            aria-controls="tab-panel-0"
            id="tab-0"
          >
            Kraken
          </button>
          <button
            class="tab-button py-2.5 w-fit sm:w-full text-left px-4 sm:px-4 rounded-xl transition-all duration-300 whitespace-nowrap overflow-hidden overflow-ellipsis max-w-fit sm:max-w-full text-white/70 hover:text-white font-medium relative z-10 cursor-pointer"
            data-tab="1"
            role="tab"
            aria-selected="false"
            aria-controls="tab-panel-1"
            id="tab-1"
          >
            Cars.com
          </button>
          <button
            class="tab-button py-2.5 w-fit sm:w-full text-left px-4 sm:px-4 rounded-xl transition-all duration-300 whitespace-nowrap overflow-hidden overflow-ellipsis max-w-fit sm:max-w-full text-white/70 hover:text-white font-medium relative z-10 cursor-pointer"
            data-tab="2"
            role="tab"
            aria-selected="false"
            aria-controls="tab-panel-2"
            id="tab-2"
          >
            MVPindex
          </button>
          <button
            class="tab-button py-2.5 w-fit sm:w-full text-left px-4 sm:px-4 rounded-xl transition-all duration-300 whitespace-nowrap overflow-hidden overflow-ellipsis max-w-fit sm:max-w-full text-white/70 hover:text-white font-medium relative z-10 cursor-pointer"
            data-tab="3"
            role="tab"
            aria-selected="false"
            aria-controls="tab-panel-3"
            id="tab-3"
          >
            ZEFR
          </button>
          <button
            class="tab-button py-2.5 w-fit sm:w-full text-left px-4 sm:px-4 rounded-xl transition-all duration-300 whitespace-nowrap overflow-hidden overflow-ellipsis max-w-fit sm:max-w-full text-white/70 hover:text-white font-medium relative z-10 cursor-pointer"
            data-tab="4"
            role="tab"
            aria-selected="false"
            aria-controls="tab-panel-4"
            id="tab-4"
          >
            Previous roles
          </button>
          <h2 class="relative text-tertiary px-5 py-2 before:absolute before:top-0 before:left-0.5 before:content-['▹'] before:text-tertiary before:mt-2 sm:mt-5">
            Education
          </h2>
          <button
            class="tab-button py-2.5 w-fit sm:w-full text-left px-4 sm:px-4 rounded-xl transition-all duration-300 whitespace-nowrap overflow-hidden overflow-ellipsis max-w-fit sm:max-w-full text-white/70 hover:text-white font-medium relative z-10 cursor-pointer"
            data-tab="5"
            role="tab"
            aria-selected="false"
            aria-controls="tab-panel-5"
            id="tab-5"
          >
            Machine Learning Engineering Bootcamp
          </button>
          <button
            class="tab-button py-2.5 w-fit sm:w-full text-left px-4 sm:px-4 rounded-xl transition-all duration-300 whitespace-nowrap overflow-hidden overflow-ellipsis max-w-fit sm:max-w-full text-white/70 hover:text-white font-medium relative z-10 cursor-pointer"
            data-tab="6"
            role="tab"
            aria-selected="false"
            aria-controls="tab-panel-6"
            id="tab-6"
          >
            DevMountain
          </button>
          <button
            class="tab-button py-2.5 w-fit sm:w-full text-left px-4 sm:px-4 rounded-xl transition-all duration-300 whitespace-nowrap overflow-hidden overflow-ellipsis max-w-fit sm:max-w-full text-white/70 hover:text-white font-medium relative z-10 cursor-pointer"
            data-tab="7"
            role="tab"
            aria-selected="false"
            aria-controls="tab-panel-7"
            id="tab-7"
          >
            Utah Valley University
          </button>
        </div>
      </div>

      <!-- Tab Content -->
      <div id="tab-content" class="w-full relative overflow-hidden" role="tabpanel" aria-live="polite">
        <!-- Kraken Tab -->
        <div class="tab-panel w-full p-4" data-tab="0" role="tabpanel" id="tab-panel-0" aria-labelledby="tab-0" style="transition: opacity 300ms ease-in-out; opacity: 1;">
          <h3>
            Senior Software Engineer
            <span class="text-sixth"> @ Kraken Digital Asset Exchange (Remote)</span>
          </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2021 - 2024</p>
          <ul class="relative pl-5 text-sm text-zinc-300 list-disc flex flex-col gap-4">
            <li>
              Reduced downtime by 2% and increased data throughput by 11% by
              engineering fault-tolerant data pipelines through Rust, Golang, and TypeScript.
            </li>
            <li>
              Cut message processing latency by optimizing Kafka-based data
              ingestion and processing to ensure 99.9% data delivery
              reliability.
            </li>
            <li>
              Decreased operational costs by 5% and improved scalability by
              architecting AWS infrastructure that supported data-intensive
              applications with 99.99% uptime.
            </li>
            <li>
              Developed analytics frameworks to enhance actionable insights
              extraction efficiency, drive data-driven decision-making, and
              improve product performance.
            </li>
            <li>
              Reduced bugs and improved code maintainability in Node.js
              projects by leading TypeScript adoption to accelerate feature
              delivery.
            </li>
            <li>
              Delivered resource savings by developing and implementing
              automation strategies to reduce manual intervention and
              improve workflow efficiency.
            </li>
            <li>
              Improved code coverage metrics by 17% and increased team
              productivity by fostering a culture of continuous improvement
              among junior engineers.
            </li>
            <li>
              Increased employee satisfaction by cultivating an inclusive
              environment and advocating for team cohesion and innovation.
            </li>
          </ul>

          <div class="w-full flex flex-wrap items-center mt-4 gap-2">
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Rust
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Python
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              TypeScript
            </p>
          </div>
        </div>

        <!-- Cars.com Tab -->
        <div class="tab-panel w-full p-4 hidden" data-tab="1" role="tabpanel" id="tab-panel-1" aria-labelledby="tab-1" style="transition: opacity 300ms ease-in-out; opacity: 0;">
          <h3>
            Senior Software Engineer
            <span class="text-sixth"> @ Cars.com (Remote)</span>
          </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2019 – 2021</p>
          <h3>Software Engineer </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2017 – 2019</p>
          <ul class="relative pl-5 text-sm text-zinc-300 list-disc flex flex-col gap-4">
            <li>
              Promoted to Senior Software Engineer by delivering exceptional
              results and demonstrating leadership potential.
            </li>
            <li>
              Accelerated inventory placement tenfold with Elixir and
              Erlang/OTP, leveraging GenStage, Flow, and streaming
              technologies.
            </li>
            <li>
              Increased user engagement metrics by implementing the Elixir
              Phoenix Framework, enhancing search speed by 30% with
              Elasticsearch and Redis, and integrating third-party APIs
              for seamless data flow.
            </li>
            <li>
              Reduced post-launch issue resolution time as a co-author for
              specifications, design documents, and documentation.
            </li>
          </ul>
          <div class="w-full flex flex-wrap items-center mt-4 gap-2">
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Elixir
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Erlang/OTP
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              GenStage
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Flow
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Elixir Phoenix Framework
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Elasticsearch
            </p>
          </div>
        </div>

        <!-- MVPindex Tab -->
        <div class="tab-panel w-full p-4 hidden" data-tab="2" role="tabpanel" id="tab-panel-2" aria-labelledby="tab-2" style="transition: opacity 300ms ease-in-out; opacity: 0;">
          <h3>
            Software Engineer
            <span class="text-sixth">@ MVPindex - Dallas, TX</span>
          </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2017</p>
          <ul class="relative pl-5 text-sm text-zinc-300 list-disc flex flex-col gap-4">
            <li>
              Reduced processing times 15% using Node.js, Kafka, SQL,
              Elasticsearch, and AWS.
            </li>
            <li>
              Improved audience segmentation by collaborating with data
              scientists on Facebook data to develop advanced demographic
              models.
            </li>
            <li>
              Increased user acquisition and retention by integrating OAuth
              for multiple social media logins.
            </li>
          </ul>
          <div class="w-full flex flex-wrap items-center mt-4 gap-2">
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Node.js
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Kafka
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              SQL
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              Elasticsearch
            </p>
            <p class="text-xs bg-secondary/30 text-secondary rounded p-1 w-fit">
              AWS
            </p>
          </div>
        </div>

        <!-- ZEFR Tab -->
        <div class="tab-panel w-full p-4 hidden" data-tab="3" role="tabpanel" id="tab-panel-3" aria-labelledby="tab-3" style="transition: opacity 300ms ease-in-out; opacity: 0;">
          <h3>
            Software Engineer
            <span class="text-sixth">@ ZEFR - PROVO, UT</span>
          </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2015 - 2017</p>
          <ul class="relative pl-5 text-sm text-zinc-300 list-disc flex flex-col gap-4">
            <li>
              Boosted collaboration among internal marketing teams and
              external partners by developing and deploying an Influencer
              Management System (IMS).
            </li>
            <li>
              Enhanced campaign insights by designing and implementing data
              extraction and analysis procedures to monitor daily social
              media posts from top influencers.
            </li>
            <li>
              Increased campaign engagement by 35% and reduced acquisition
              costs by optimizing targeting algorithms.
            </li>
          </ul>
        </div>

        <!-- Previous Roles Tab -->
        <div class="tab-panel w-full p-4 hidden" data-tab="4" role="tabpanel" id="tab-panel-4" aria-labelledby="tab-4" style="transition: opacity 300ms ease-in-out; opacity: 0;">
          <h3>
            Web Developer
            <span class="text-sixth">
              @ About Time Technologies, LLC
            </span>
          </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2014 - 2015</p>
          <h3>
            Technical Supervisor
            <span class="text-sixth">@ Bluehost</span>
          </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2012 - 2014</p>
        </div>

        <!-- Education Tabs -->
        <div class="tab-panel w-full p-4 hidden" data-tab="5" role="tabpanel" id="tab-panel-5" aria-labelledby="tab-5" style="transition: opacity 300ms ease-in-out; opacity: 0;">
          <h3>
            Extended Studies Machine Learning Engineering Bootcamp
            <span class="text-sixth">@ UC San Diego (Online)</span>
          </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2025</p>
          <p class="relative pl-5 text-sm text-zinc-300 before:absolute before:top-0 before:left-0.5 before:content-['▹'] before:text-secondary">
            <span class="text-secondary">Relevant Coursework:</span>
            Deep Learning, Computer Vision and Image Processing, The Machine
            Learning Engineering Stack, ML Models at Scale and In
            Production, Deploying ML Systems
          </p>
        </div>

        <div class="tab-panel w-full p-4 hidden" data-tab="6" role="tabpanel" id="tab-panel-6" aria-labelledby="tab-6" style="transition: opacity 300ms ease-in-out; opacity: 0;">
          <h3>
            Certificate Of Completion, Full Stack Software Engineer
            <span class="text-sixth">@ DevMountain, Provo, UT</span>
          </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2015</p>
          <p class="relative pl-5 text-sm text-zinc-300 before:absolute before:top-0 before:left-0.5 before:content-['▹'] before:text-secondary">
            <span class="text-secondary">Relevant Coursework:</span>
            HTML 5 & CSS3, JavaScript, Git & GitHub, jQuery, AngularJS,
            Test-Driven Development, Node.JS, Databases
          </p>
        </div>

        <div class="tab-panel w-full p-4 hidden" data-tab="7" role="tabpanel" id="tab-panel-7" aria-labelledby="tab-7" style="transition: opacity 300ms ease-in-out; opacity: 0;">
          <h3>
            Coursework toward a Bachelor of Science (B.Sc.) In Computer
            Science
            <span class="text-sixth">@ Utah Valley University, Orem, UT</span>
          </h3>
          <p class="text-sm text-zinc-400 mt-1 mb-6">2011 - 2012</p>
        </div>
      </div>
    </div>
  </div>
  <div class="h-[3px] opacity-90 absolute -bottom-20 left-0 right-0 mx-auto w-32 rounded-md bg-tertiary seperation-animation-1"></div>
  <div class="absolute h-[3px] rounded-md -bottom-14 right-0 left-0 mx-auto w-48 bg-sixth opacity-90 seperation-animation-2"></div>
  <div class="h-[3px] absolute opacity-90 -bottom-8 left-0 right-0 w-40 mx-auto rounded-md bg-tertiary seperation-animation-3"></div>
</section>

<script>
  let currentTab = 0;
  let calculatedHeight = 0;
  let isMobile = false;

  const experienceContent = document.getElementById('experience-content');
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabPanels = document.querySelectorAll('.tab-panel');
  const tabPill = document.getElementById('tab-pill');
  const tabContent = document.getElementById('tab-content');
  const mobileCards = document.querySelectorAll('.mobile-card');

  // Intersection observer for section animation
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.remove('opacity-0', 'translate-y-52');
        entry.target.classList.add('opacity-100', 'translate-y-0');
      }
    });
  });

  if (experienceContent) {
    observer.observe(experienceContent);
  }

  // Check if we're on mobile
  function checkMobile() {
    isMobile = window.innerWidth < 640;
    return isMobile;
  }

  // Mobile accordion functionality with intelligent touch detection
  function initMobileAccordion() {
    mobileCards.forEach((card) => {
      const header = card.querySelector('.mobile-card-header') as HTMLElement;
      const content = card.querySelector('.mobile-card-content') as HTMLElement;
      const chevron = card.querySelector('.mobile-card-chevron') as HTMLElement;

      if (header && content && chevron) {
        // Touch gesture tracking variables
        let touchStartX = 0;
        let touchStartY = 0;
        let touchStartTime = 0;
        let isTouchMove = false;
        let touchMoveDistance = 0;

        // Thresholds for gesture detection
        const MOVEMENT_THRESHOLD = 10; // pixels
        const TIME_THRESHOLD = 150; // milliseconds
        const SCROLL_THRESHOLD = 15; // pixels for scroll detection

        // Shared toggle function for accordion expansion
        const toggleCard = () => {
          const isExpanded = header.getAttribute('aria-expanded') === 'true';

          // Close all other cards
          mobileCards.forEach((otherCard) => {
            if (otherCard !== card) {
              const otherHeader = otherCard.querySelector('.mobile-card-header') as HTMLElement;
              const otherContent = otherCard.querySelector('.mobile-card-content') as HTMLElement;
              const otherChevron = otherCard.querySelector('.mobile-card-chevron') as HTMLElement;

              if (otherHeader && otherContent && otherChevron) {
                otherHeader.setAttribute('aria-expanded', 'false');
                otherContent.setAttribute('aria-hidden', 'true');
                otherContent.classList.remove('max-h-screen', 'opacity-100');
                otherContent.classList.add('max-h-0', 'opacity-0');
                otherChevron.classList.remove('rotate-180');
                otherChevron.classList.add('rotate-0');
              }
            }
          });

          // Toggle current card
          if (isExpanded) {
            header.setAttribute('aria-expanded', 'false');
            content.setAttribute('aria-hidden', 'true');
            content.classList.remove('max-h-screen', 'opacity-100');
            content.classList.add('max-h-0', 'opacity-0');
            chevron.classList.remove('rotate-180');
            chevron.classList.add('rotate-0');
          } else {
            header.setAttribute('aria-expanded', 'true');
            content.setAttribute('aria-hidden', 'false');
            content.classList.remove('max-h-0', 'opacity-0');
            content.classList.add('max-h-screen', 'opacity-100');
            chevron.classList.remove('rotate-0');
            chevron.classList.add('rotate-180');
          }
        };

        // Touch start handler - record initial touch position and time
        const handleTouchStart = (e: TouchEvent) => {
          const touch = e.touches[0];
          touchStartX = touch.clientX;
          touchStartY = touch.clientY;
          touchStartTime = Date.now();
          isTouchMove = false;
          touchMoveDistance = 0;

          // Add visual feedback for potential tap
          header.classList.add('touch-active');
        };

        // Touch move handler - track movement to detect scrolling intent
        const handleTouchMove = (e: TouchEvent) => {
          const touch = e.touches[0];
          const deltaX = Math.abs(touch.clientX - touchStartX);
          const deltaY = Math.abs(touch.clientY - touchStartY);

          // Calculate total movement distance
          touchMoveDistance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);

          // If movement exceeds scroll threshold, mark as scroll gesture and remove visual feedback
          if (touchMoveDistance > SCROLL_THRESHOLD) {
            isTouchMove = true;
            header.classList.remove('touch-active');
          }
        };

        // Touch end handler - determine if this was a tap or scroll gesture
        const handleTouchEnd = (e: TouchEvent) => {
          e.preventDefault(); // Prevent default touch behavior

          const touchEndTime = Date.now();
          const touchDuration = touchEndTime - touchStartTime;

          // Determine if this was an intentional tap:
          // 1. Movement distance is below threshold (not a scroll)
          // 2. Touch duration is reasonable (not too long)
          // 3. No significant movement was detected during the gesture
          const isIntentionalTap =
            touchMoveDistance <= MOVEMENT_THRESHOLD &&
            touchDuration <= TIME_THRESHOLD &&
            !isTouchMove;

          // Only toggle if this was clearly an intentional tap
          if (isIntentionalTap) {
            toggleCard();
          }

          // Always remove visual feedback and reset tracking variables
          header.classList.remove('touch-active');
          touchStartX = 0;
          touchStartY = 0;
          touchStartTime = 0;
          isTouchMove = false;
          touchMoveDistance = 0;
        };

        // Desktop click handler (for mouse/trackpad)
        const handleClick = (e: MouseEvent) => {
          e.preventDefault();
          toggleCard();
        };

        // Touch cancel handler - clean up if touch is interrupted
        const handleTouchCancel = () => {
          header.classList.remove('touch-active');
          touchStartX = 0;
          touchStartY = 0;
          touchStartTime = 0;
          isTouchMove = false;
          touchMoveDistance = 0;
        };

        // Add touch event listeners for intelligent gesture detection
        header.addEventListener('touchstart', handleTouchStart, { passive: true });
        header.addEventListener('touchmove', handleTouchMove, { passive: true });
        header.addEventListener('touchend', handleTouchEnd, { passive: false });
        header.addEventListener('touchcancel', handleTouchCancel, { passive: true });

        // Add click handler for desktop/mouse interactions
        header.addEventListener('click', handleClick);

        // Add keyboard support for accessibility
        header.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggleCard();
          }
        });
      }
    });
  }

  // Desktop tab functionality
  function calculateOptimalHeight() {
    if (!tabContent || !tabPanels.length || isMobile) return;

    let maxHeight = 0;

    tabPanels.forEach((panel) => {
      const panelElement = panel as HTMLElement;

      const wasHidden = panelElement.classList.contains('hidden');
      const currentOpacity = panelElement.style.opacity;

      panelElement.classList.remove('hidden');
      panelElement.style.opacity = '1';
      panelElement.style.position = 'static';

      panelElement.offsetHeight;
      const height = panelElement.scrollHeight;

      if (height > maxHeight) {
        maxHeight = height;
      }

      if (wasHidden) {
        panelElement.classList.add('hidden');
      }
      panelElement.style.opacity = currentOpacity;
      panelElement.style.position = '';
    });

    calculatedHeight = maxHeight + 20;
    tabContent.style.height = `${calculatedHeight}px`;

    return calculatedHeight;
  }

  function recalculateHeightOnResize() {
    if (tabContent && tabPanels.length && !isMobile) {
      calculateOptimalHeight();
    }
  }

  function switchTab(tabIndex: number) {
    if (currentTab === tabIndex || isMobile) return;

    if (tabPill) {
      const targetButton = tabButtons[tabIndex] as HTMLElement;
      const pillContainer = tabPill.parentElement;

      if (targetButton && pillContainer) {
        const buttonRect = targetButton.getBoundingClientRect();
        const containerRect = pillContainer.getBoundingClientRect();

        const buttonTop = buttonRect.top - containerRect.top;
        const buttonHeight = buttonRect.height;
        const pillHeight = 44; // h-11 = 44px

        const centeredPosition = buttonTop + (buttonHeight - pillHeight) / 2;
        tabPill.style.setProperty('--pill-top', `${centeredPosition}px`);
      }
    }

    tabButtons.forEach((button, index) => {
      if (index === tabIndex) {
        button.classList.remove('text-white/70', 'hover:text-white');
        button.classList.add('text-white');
        button.setAttribute('aria-selected', 'true');
      } else {
        button.classList.remove('text-white');
        button.classList.add('text-white/70', 'hover:text-white');
        button.setAttribute('aria-selected', 'false');
      }
    });

    const currentPanel = tabPanels[currentTab] as HTMLElement;
    const targetPanel = tabPanels[tabIndex] as HTMLElement;

    if (currentPanel && targetPanel) {
      currentPanel.style.opacity = '0';

      setTimeout(() => {
        currentPanel.classList.add('hidden');
        targetPanel.classList.remove('hidden');
        targetPanel.style.opacity = '0';

        targetPanel.offsetHeight;

        setTimeout(() => {
          targetPanel.style.opacity = '1';
        }, 10);
      }, 150);
    }

    currentTab = tabIndex;
  }

  function setInitialPillPosition() {
    if (tabPill && tabButtons.length > 0 && !isMobile) {
      const firstButton = tabButtons[0] as HTMLElement;
      const pillContainer = tabPill.parentElement;

      if (firstButton && pillContainer) {
        const buttonRect = firstButton.getBoundingClientRect();
        const containerRect = pillContainer.getBoundingClientRect();

        const buttonTop = buttonRect.top - containerRect.top;
        const buttonHeight = buttonRect.height;
        const pillHeight = 44; // h-11 = 44px

        const centeredPosition = buttonTop + (buttonHeight - pillHeight) / 2;
        tabPill.style.setProperty('--pill-top', `${centeredPosition}px`);
      }
    }
  }

  function updateCurrentPillPosition() {
    if (tabPill && tabButtons.length > 0 && !isMobile) {
      const currentButton = tabButtons[currentTab] as HTMLElement;
      const pillContainer = tabPill.parentElement;

      if (currentButton && pillContainer) {
        const buttonRect = currentButton.getBoundingClientRect();
        const containerRect = pillContainer.getBoundingClientRect();

        const buttonTop = buttonRect.top - containerRect.top;
        const buttonHeight = buttonRect.height;
        const pillHeight = 44; // h-11 = 44px

        const centeredPosition = buttonTop + (buttonHeight - pillHeight) / 2;

        tabPill.style.transition = 'none';
        tabPill.style.setProperty('--pill-top', `${centeredPosition}px`);

        setTimeout(() => {
          tabPill.style.transition = 'transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
        }, 50);
      }
    }
  }

  // Initialize functionality based on screen size
  function initializeInterface() {
    checkMobile();

    if (isMobile) {
      initMobileAccordion();
    } else {
      setInitialPillPosition();
      calculateOptimalHeight();

      // Add desktop tab event listeners
      tabButtons.forEach((button, index) => {
        button.addEventListener('click', () => {
          switchTab(index);
        });

        button.addEventListener('keydown', (e) => {
          const keyboardEvent = e as KeyboardEvent;
          let newIndex = index;

          switch (keyboardEvent.key) {
            case 'ArrowRight':
            case 'ArrowDown':
              keyboardEvent.preventDefault();
              newIndex = (index + 1) % tabButtons.length;
              break;
            case 'ArrowLeft':
            case 'ArrowUp':
              keyboardEvent.preventDefault();
              newIndex = (index - 1 + tabButtons.length) % tabButtons.length;
              break;
            case 'Home':
              keyboardEvent.preventDefault();
              newIndex = 0;
              break;
            case 'End':
              keyboardEvent.preventDefault();
              newIndex = tabButtons.length - 1;
              break;
            default:
              return;
          }

          (tabButtons[newIndex] as HTMLElement).focus();
          switchTab(newIndex);
        });
      });
    }
  }

  // Initialize on load
  setTimeout(() => {
    initializeInterface();
  }, 100);

  // Handle resize events
  let resizeTimeout: ReturnType<typeof setTimeout>;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(() => {
      const wasMobile = isMobile;
      checkMobile();

      // If we switched between mobile and desktop, reinitialize
      if (wasMobile !== isMobile) {
        initializeInterface();
      } else if (!isMobile) {
        updateCurrentPillPosition();
        recalculateHeightOnResize();
      }
    }, 150);
  });
</script>
